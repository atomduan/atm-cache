# Open Watcom C 1.0, 1.2, 1.3

# optimizations

# maximize speed
CFLAGS="$CFLAGS -ot"
# reorder instructions for best pipeline usage
CFLAGS="$CFLAGS -op"
# inline intrinsic functions
CFLAGS="$CFLAGS -oi"
# inline expansion
CFLAGS="$CFLAGS -oe"
# disable stack checking calls
CFLAGS="$CFLAGS -s"

case $CPU in
    pentium)
        # optimize for Pentium and Athlon
        # register-based arguments passing conventions
        CPU_OPT="-5r"
        # stack-based arguments passing conventions
        #CPU_OPT="-5s"
    ;;

    pentiumpro)
        # optimize for Pentium Pro, Pentium II and Pentium III
        # register-based arguments passing conventions
        CPU_OPT="-6r"
        # stack-based arguments passing conventions
        #CPU_OPT="-6s"
    ;;
esac

CFLAGS="$CFLAGS $CPU_OPT"


# warnings

# maximum level
CFLAGS="$CFLAGS -wx"
#CFLAGS="$CFLAGS -w3"

# stop on warning
CFLAGS="$CFLAGS -we"

# built target is NT
CFLAGS="$CFLAGS -bt=nt"

# multithreaded
CFLAGS="$CFLAGS -bm"

# debug
CFLAGS="$CFLAGS -d2"

# quiet
CFLAGS="$CFLAGS -zq"

# Open Watcom C 1.2
have=ATM_HAVE_C99_VARIADIC_MACROS . auto/have


# the precompiled headers
#CORE_DEPS="$CORE_DEPS $ATM_BUILD/atm_config.pch"
#ATM_PCH="$ATM_BUILD/atm_config.pch"
#ATM_BUILD_PCH="-fhq=$ATM_BUILD/atm_config.pch"
#ATM_USE_PCH="-fh=$ATM_BUILD/atm_config.pch"


# the link flags, built target is NT GUI mode application
#CORE_LINK="$CORE_LINK -l=nt_win"


# the resource file
ATM_RCC="wrc \$(CORE_INCS) -fo=$ATM_BUILD/atmcache.res "
ATM_RCC="$ATM_RCC $ATM_WIN32_RC $ATM_BUILD/atmcache.exe"


atm_include_opt="-i="
atm_objout="-fo"
atm_binout="-fe="
atm_objext="obj"
atm_binext=".exe"

atm_regex_dirsep='\\'
atm_dirsep="\\"

atm_long_start=' '
atm_long_end=' '
atm_long_regex_cont=' \&\
	'
atm_long_cont=' &
	'

atm_regex_cont=' \&\
	'
atm_cont=' &
	'
atm_tab=' &
		'
