atm_feature="GeoIP library"
atm_feature_name=
atm_feature_run=no
atm_feature_incs="#include <GeoIP.h>"
atm_feature_path=
atm_feature_libs="-lGeoIP"
atm_feature_test="GeoIP_open(NULL, 0)"
. auto/feature


if [ $atm_found = no ]; then

    # FreeBSD port

    atm_feature="GeoIP library in /usr/local/"
    atm_feature_path="/usr/local/include"

    if [ $ATM_RPATH = YES ]; then
        atm_feature_libs="-R/usr/local/lib -L/usr/local/lib -lGeoIP"
    else
        atm_feature_libs="-L/usr/local/lib -lGeoIP"
    fi

    . auto/feature
fi


if [ $atm_found = no ]; then

    # NetBSD port

    atm_feature="GeoIP library in /usr/pkg/"
    atm_feature_path="/usr/pkg/include"

    if [ $ATM_RPATH = YES ]; then
        atm_feature_libs="-R/usr/pkg/lib -L/usr/pkg/lib -lGeoIP"
    else
        atm_feature_libs="-L/usr/pkg/lib -lGeoIP"
    fi

    . auto/feature
fi


if [ $atm_found = no ]; then

    # MacPorts

    atm_feature="GeoIP library in /opt/local/"
    atm_feature_path="/opt/local/include"

    if [ $ATM_RPATH = YES ]; then
        atm_feature_libs="-R/opt/local/lib -L/opt/local/lib -lGeoIP"
    else
        atm_feature_libs="-L/opt/local/lib -lGeoIP"
    fi

    . auto/feature
fi


if [ $atm_found = yes ]; then

    CORE_INCS="$CORE_INCS $atm_feature_path"

    if [ $USE_GEOIP = YES ]; then
        CORE_LIBS="$CORE_LIBS $atm_feature_libs"
    fi

    ATM_LIB_GEOIP=$atm_feature_libs

    atm_feature="GeoIP IPv6 support"
    atm_feature_name="ATM_HAVE_GEOIP_V6"
    atm_feature_run=no
    atm_feature_incs="#include <stdio.h>
                      #include <GeoIP.h>"
    #atm_feature_path=
    #atm_feature_libs=
    atm_feature_test="printf(\"%d\", GEOIP_CITY_EDITION_REV0_V6);"
    . auto/feature

else

cat << END

$0: error: the GeoIP module requires the GeoIP library.
You can either do not enable the module or install the library.

END

    exit 1
fi
